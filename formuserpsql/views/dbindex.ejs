<!-- views/index.ejs -->

<!DOCTYPE html>
<html>
  <head>
    <title><%= title %></title>
  </head>
  <body>
    <h1><%= title %></h1>

    <form action="dbsearch" method="GET">
      <label for="name">Name: </label>
      <input
        type="text"
        id="name"
        name="name"
        value="<%= (typeof query !== 'undefined' && query.name) ? query.name : '' %>"
      />
      <button type="submit">Search</button>
    </form>

    <ul>
      <% if (locals.users) {%> <% users.forEach(function(user) { %>
      <li>ID: <%= user.id %>, Name: <%= user.username %></li>

      <% }); %> <% } %>
    </ul>
    <form action="/dbdelete" method="POST" style="display: inline">
      <button
        type="submit"
        onclick="return confirm('Are you sure you want to delete this user?');"
      >
        Delete All
      </button>
    </form>

    <a href="/dbnew">Create a user</a>
  </body>
</html>
